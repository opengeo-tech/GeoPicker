#
# Config file parsed by configYml lib.
# learn more about syntax: https://github.com/stefanocudini/configYml
#

prod:
  port: 8080
  host: 0.0.0.0
  datapath: '/data'

dev:
  port: 9090
  host: 127.0.0.1
  datapath: './tests/data'
  input_validation: false
  fastifyConf:
    logger:
      level: 'debug'
      transport:
        target: 'pino-pretty'

defaultsEnvVars:
  PREFIX: '/'
  DEMO_PAGE: false
  DATASET_DEFAULT: 'test'

prefix: ${PREFIX}

demo_page: ${DEMO_PAGE}
demo_path: '/'

attribution: "Demo instance of Geopicker Server - Copyright Stefano Cudini https://opengeo.tech"

# serving Swagger (OpenAPI v2) or OpenAPI v3 schemas
# https://github.com/fastify/fastify-swagger
swagger:
  enabled: true
  # prefix append to `prefix`
  routePrefix: '/docs'

fastifyConf:
  maxParamLength: 1024
  logger:
    level: 'info'
    transport:
      target: 'pino-pretty'

# Cross-origin resource sharing
# https://github.com/fastify/fastify-cors
cors:
  origin: '*'
  optionsSuccessStatus: 200

# if false speedup the responses but not valid input locations
input_validation: true

# maximum number of locations picked in a single request
input_max_locations: 10000


# number of digits precision returned in geojson coordinates
output_precision_digits: 7

# default densify options
densify:
  length: 90
  units: 'meters'

errors:
  nodatadir: "Data directory not exists"
  nodefaultdataset: "Default dataset file not exists"
  nodataset: "Dataset name not exists"
  densify_nobody: "Require a geojson in body"
  nolocations: "Require array of locations"
  outofbounds: "Location is out of dataset bounds"

datapath: '/data'
datasets:
  default: ${DATASET_DEFAULT}
  test:
    path: test_4611_dem.tif
    band: 1
    epsg: 4326
  # aliases of same dataset
  altitude: elevation
  elevation:
    path: trentino-altoadige_dem_90m.tif
    band: 1
    epsg: 4326
  alps:
    path: alps_dem_10m.tif
    band: 1
    epsg: 4326
  aspect:
    path: italia_aspect_30m.tif
    band: 2
    epsg: 4326
  elevation_veneto:
    path: veneto_30m.tif
  # TODO band: * # TODO espose all bands if value is *
  # TODO manage shape
  #  admins:
  #   path: a-shape-file.shp
